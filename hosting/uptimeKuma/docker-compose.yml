services:
  # UI interface at http://localhost:30565
  uptime-kuma:
    container_name: uptime-kuma
    image: "louislam/uptime-kuma:1"
    restart: unless-stopped
    networks:
      - exist
    ports:
      - 43001:3001
    environment:
      - ADMIN_USERNAME=${KUMA_ADMIN_USERNAME}
      - ADMIN_PASSWORD=${KUMA_ADMIN_PASSWORD}
    volumes:
      - uptime_kuma_data:/app/data

volumes:
  uptime_kuma_data:
    driver: local
    driver_opts:
      type: "nfs"
      o: "addr=${TRUENAS_SERVER_ADDRESS},nolock,soft,rw,nfsvers=4"
      device: ":${TRUENAS_CONTAINER_PATH}/uptime_kuma_data"

networks:
  exist:
    external: true
